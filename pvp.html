<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Monster Clash - PvP</title>
  <style>
    body { background: #111; color: #eee; font-family: sans-serif; text-align: center; }
    .container { display: flex; justify-content: space-around; padding: 20px; }
    .box { border: 1px solid #fff; padding: 10px; width: 250px; }
    .log { height: 150px; overflow-y: auto; border: 1px solid #eee; margin-top: 20px; padding: 10px; }
    button { margin: 5px; padding: 10px; font-size: 16px; }
  </style>
</head>
<body>
  <h1>Monster Clash - PvP</h1>
  <div class="container">
    <div class="box" id="playerBox">Player</div>
    <div class="box" id="enemyBox">Opponent</div>
  </div>

  <div>
    <button onclick="makeMove('attack')">Attack</button>
    <button onclick="makeMove('defend')">Defend</button>
    <button onclick="makeMove('skill')">Skill</button>
  </div>

  <div class="log" id="log"></div>

  <!-- Socket.io Client -->
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script>
    const socket = io("https://pvpbackend.onrender.com");
    let roomId = '';
    let isMyTurn = false;

    function log(msg) {
      const logBox = document.getElementById('log');
      logBox.innerHTML += msg + '<br>';
      logBox.scrollTop = logBox.scrollHeight;
    }

    socket.on('waiting', msg => {
      log(msg);
    });

    socket.on('startGame', (data) => {
      roomId = data.roomId;
      isMyTurn = data.players[0] === socket.id;
      log('Game started! ' + (isMyTurn ? 'Your turn!' : 'Waiting for opponent...'));
      renderPlayer();
    });

    socket.on('opponentMove', (move) => {
      log(`Opponent chose: ${move}`);
      isMyTurn = true;
      log('Your turn!');
    });

    function makeMove(move) {
      if (!isMyTurn) return log('Not your turn!');
      log(`You chose: ${move}`);
      socket.emit('playerMove', { roomId, move });
      isMyTurn = false;
    }

    function renderPlayer() {
      document.getElementById('playerBox').innerHTML = `<p>ID: ${socket.id}</p>`;
    }
  </script>
</body>
</html>
